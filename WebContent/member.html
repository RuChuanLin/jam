<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<link href="_997_framework/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="_997_framework/font-awesome-4.7.0/css/font-awesome.min.css">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="stylesheet" href="_997_framework/css/reset.css?ver=5">
	<link rel="stylesheet" href="_997_framework/css/queries.css?ver=5">
	<link rel="stylesheet" href="_997_framework/css/bootstrap-social.css?ver=5">
	<link rel="stylesheet" href="_997_framework/css/croppie.css?ver=5">
	<link rel="stylesheet" href="_997_framework/css/style.css?ver=12">
	<title>Member</title>
</head>

<body>
	<!--croppie installation-->
	<div>
		<div id="cropArea" class="cropArea">
			<input id="crop" class="form-btn crop-btn" type="button" value="裁切圖片">
			<button id="crop-cancel" class="crop-cancel-btn"><i class="fa fa-times-circle" aria-hidden="true"></i></button>

			<canvas id="cropboard" class="cropboard" style="display:none;" width="140" height="140">You shouldn't see this.</canvas>
		</div>

	</div>
	<!-- navbar -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
				 aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
				<a class="navbar-brand" href="#">
					<!-- svg logo -->
					<svg class="logo-brand" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet"
					 viewBox="665 275 120 103">
						<g data-item-type="text" data-item="Business" id="logo__item--business" class="logo__item">
							<g class="logo__item__inner" transform="translate(753.0234375 371.4801896051838) scale(0.44079098643366293 0.44079098643366293) rotate(0 0 0)">
								<text data-part-id="logo__item--business" dy="0" dominant-baseline="auto" alignment-baseline="auto" font-family="Montserrat"
								 font-size="32px" fill="#435862" letter-spacing="0" font-weight="bold" font-style="normal" data-font-family="Montserrat"
								 data-font-weight="bold" data-font-style="normal" data-ttf-url="/builder_assets/fontsttf/font-montserrat-bold-normal.ttf"
								 data-font-filename="montserrat-bold-normal">Jam</text>
							</g>
						</g>
						<g data-item-type="image" data-item="Image" data-logo-item="" id="logo__item--logo_0" class="logo__item">
							<g class="logo__item__inner" transform="translate(648.9390949159263 254.5) scale(1.3379037364494117 1.3379037364494117) rotate(0 0 0)">

								<g>
									<linearGradient id="logo__item--logo_0__0" gradientUnits="objectBoundingBox" x1="0.5" y1="0" x2="0.5" y2="1">
										<stop offset="0" style="stop-color:#6f9074"></stop>
										<stop offset="1" style="stop-color:#666666"></stop>
									</linearGradient>
									<path fill="url(#logo__item--logo_0__0)" d="M63.412,20.263v39.895c0,0,1.562,19.893-26.109,27.739c4.169,1.675,8.717,2.604,13.485,2.604   c20.021,0,36.249-16.229,36.249-36.251C87.037,38.67,77.206,25.389,63.412,20.263z"
									 data-part-id="logo__item--logo_0__0"></path>
									<linearGradient id="logo__item--logo_0__1" gradientUnits="objectBoundingBox" x1="0.5" y1="0" x2="0.5" y2="1">
										<stop offset="0" style="stop-color:#7da482"></stop>
										<stop offset="1" style="stop-color:#666666"></stop>
									</linearGradient>
									<path fill="url(#logo__item--logo_0__1)" d="M45.808,60.85V36.067l16.267-16.265C58.522,18.636,54.729,18,50.788,18c-20.021,0-36.25,16.23-36.25,36.249   c0,14.418,8.417,26.866,20.604,32.707C37.871,85.179,45.808,78.495,45.808,60.85z"
									 data-part-id="logo__item--logo_0__1"></path>
								</g>
							</g>
						</g>
					</svg>
					<!--svg logo-->


				</a>
				<ul id="menu-funtion" class="navbar-nav menu-wrapper">
					<li><a href="/Jam/secondhand_view.html">Jam二手</a>
						<ul class="drop">
							<li><a href="#">吉他類</a></li>
							<li><a href="#">貝斯類</a></li>
							<li><a href="#">鼓及打擊類</a></li>
							<li><a href="#">鍵盤與合成器類</a></li>
							<li><a href="#">古典弦樂類</a></li>
							<li><a href="#">管樂類</a></li>
							<li><a href="#">音箱類</a></li>
							<li><a href="#">DJ控制器類</a></li>
							<li><a href="#">效果器類</a></li>
							<li><a href="#">錄音界面類</a></li>
							<li><a href="#">其他</a></li>
						</ul>
					</li>
					<li><a href="#">Jam新品</a>
						<ul class="drop">
							<li><a href="#">吉他類</a></li>
							<li><a href="#">貝斯類</a></li>
							<li><a href="#">鼓及打擊類</a></li>
							<li><a href="#">鍵盤與合成器類</a></li>
							<li><a href="#">古典弦樂類</a></li>
							<li><a href="#">管樂類</a></li>
							<li><a href="#">音箱類</a></li>
							<li><a href="#">DJ控制器類</a></li>
							<li><a href="#">效果器類</a></li>
							<li><a href="#">錄音界面類</a></li>
							<li><a href="#">其他</a></li>
						</ul>
					</li>
					<li><a href="#">Jam教學</a></li>
					<li><a href="#">Jam組團</a></li>
				</ul>
			</div>


			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right">

					<!-- 登入前顯示 -->
					<li><a href="#" class="login" id="nav-login">登入</a></li>
					<li><a href="#" class="signup" id="nav-signup">註冊</a></li>
					<!-- 登入後顯示 -->
					<li><img class="nav-pic" id="nav-pic" alt=""></li>
					<li class="fb-loging-name" id="fb-loging-name"></li>
					<li>
						<a href="mailbox.html" id="nav-myinbox-btn"><i class="fa fa-envelope-o" fa-5x aria-hidden="true" ></i><span class="badge">1</span></a></li>
					<li><a id="nav-my-member-link" href="member.html" class="my-member-link">我的 Jam</a></li>
					<li><a id="nav-logout" href="#" class="logout">登出</a></li>

				</ul>
			</div>
		</div>
	</nav>

	<div class="member-bg-img"></div>
	<!-- 登入/註冊畫面 -->
	<div class="user-modal">
		<!-- this is the entire modal form, including the background -->
		<div class="user-modal-container">
			<!-- this is the container wrapper -->
			<ul class="switcher">
				<li><a href="#0">登入</a></li>
				<li><a href="#0">註冊</a></li>
			</ul>
			<div id="login">
				<!-- log in form -->
				<form class="form">
					<a class="btn btn-block btn-social btn-facebook"> <span class="fa fa-facebook"></span> 使用Facebook登入
					</a>
					<p class="fieldset">
						<label class="image-replace cd-email" for="signin-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signin-email" type="email" placeholder="E-mail">
						<span class="error-message">Error message here!</span>
					</p>
					<p class="fieldset">
						<label class="image-replace cd-password" for="signin-password">Password</label>
						<input class="full-width has-padding has-border" id="signin-password" type="text" placeholder="密碼">
						<span class="error-message">Error message here!</span>
					</p>
					<p class="fieldset">
						<input type="checkbox" id="remember-me" checked> <label for="remember-me">記得我</label>
					</p>
					<p class="fieldset">
						<input class="full-width" id="login-submit" type="submit" value="登入">
					</p>
				</form>
				<p class="form-bottom-message">
					<a href="#0">忘記密碼?</a>
				</p>
				<a href="#0" class="close-form">Close</a>
			</div>
			<!-- login -->
			<div id="signup">
				<!-- sign up form -->
				<form class="form" action="" method="">
					<a class="btn btn-block btn-social btn-facebook"> <span class="fa fa-facebook"></span> 使用Facebook註冊
					</a>
					<p class="fieldset">
						<label class="image-replace cd-email" for="signup-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signup-email" type="email" placeholder="E-mail">
						<span class="error-message">此帳號已被註冊!</span>
					</p>
					<p class="fieldset">
						<label class="image-replace cd-password" for="signup-password">Password</label>
						<input class="full-width has-padding has-border" id="signup-password" type="text" placeholder="密碼">
						<!-- <a href="#0" class="hide-password">隱藏密碼</a> -->
						<span class="error-message">請使用8位元-16位元的英文及數字組成密碼!</span>
					</p>
					<p class="fieldset">
						<label class="image-replace cd-password" for="signup-password">Password</label>
						<input class="full-width has-padding has-border" id="signup-password-confirm" type="text
                           " placeholder="確認密碼">
						<!-- <a href="#0" class="hide-password">隱藏密碼</a> -->
						<span class="error-message">密碼不一致!</span>
					</p>
					<p class="fieldset">
						<input type="checkbox" id="accept-terms"> <label for="accept-terms">我同意 <a href="#0" class="terms">使用條款與規範</a></label>
					</p>
					<p class="fieldset">
						<input class="full-width has-padding" id="reg-submit" type="submit" value="註冊">
					</p>
				</form>
				<!-- <a href="#0" class="close-form">Close</a> -->
			</div>
			<!-- signup -->
			<div id="reset-password">
				<!-- reset password form -->
				<p class="form-message">忘記密碼?請填入註冊信箱，我們將會寄一組新的密碼給您</p>
				<form class="form">
					<p class="fieldset">
						<label class="image-replace cd-email" for="reset-email">E-mail</label>
						<input class="full-width has-padding has-border" id="reset-email" type="email" placeholder="E-mail"> <span class="error-message">Error message here!</span>
					</p>
					<p class="fieldset">
						<input class="full-width has-padding" type="submit" value="重設密碼">
					</p>
				</form>
				<p class="form-bottom-message">
					<a href="#0">回到登入畫面</a>
				</p>
			</div>
			<a href="#0" class="close-form">Close</a>
		</div>
	</div>
	<!-- 站內信modal -->
	<div class="mailbox-modal">
		<div class="mailbox-modal-container">
			<div class="mailbox-body">
				<div class="mailbox-header">
					<form action="">
						<div class="mail-title">
							<label for="mail-title">主旨</label> <br> <label for="recipient">收件者</label> <br>
						</div>
						<div class="mail-input">
							<input type="text" class="mail-input" id="mail-title"> <br>
							<input type="text" class="mail-input" id="recipient"> <br>
						</div>

						<div class="mail-content">
							<div class="mail-title">
								<label for="mail-content">內容</label>
							</div>
							<div class="mail-input content">
								<textarea name="" class="mail-textarea" id="mail-content"></textarea>
							</div>
						</div>
					</form>
				</div>
			</div>
			<div class="mail-footer">
				<button class="form-btn send" id="mail-submit" type="submit">寄出</button>
			</div>
		</div>
	</div>
	<!-- 會員資料編輯跳出頁面 -->
	<div class="member-edit-modal">
		<div class="member-edit-modal-container">
			<div class="member-edit-header">
				<h1>會員簡介編輯</h1>
			</div>
			<form class="member-edit-form">
				<div class="member-edit-body">
					<div class="member-edit-image">
						<img class="profolio-img" id="preview-pic" src="_996_image/user.png" />
						<label for="fake-update-input" id="update-member-pic" class="update-member-pic"><i class="fa fa-camera-retro fa-2x"></i></label>
						<input type="file" class="fake-update-input" id="fake-update-input">
					</div>
					<div class="member-edit-name">
						<label for="member-name" class="member-form-label-text">名稱</label>
						<input type="text" class="member-input name" id="update-member-name">
					</div>
					<div class="member-edit-instruments">
						<label for="member-instruments" class="member-form-label-text" id="member-instruments-label">樂器專長</label>
						<button type="button" class="form-btn instruments-plus">
							<i class="fa fa-plus" aria-hidden="true"></i>
						</button>
						<button type="button" class="form-btn instruments-minus">
							<i class="fa fa-minus" aria-hidden="true"></i>
						</button>
						<div class="member-edit-instruments list"></div>
					</div>
					<div class="member-edit-name">
						<label for="member-name" class="member-form-label-text">備用信箱</label>
						<input type="text" class="member-input name" id="update-member-email">
					</div>
					<div class="member-edit-intro">
						<label for="member-edit-textarea" class="member-form-label-text">個人經歷簡介</label>
						<textarea class="member-edit-textarea" id="update-member-intro"></textarea>
					</div>
					<div class="member-edit-media">
						<label for="member-media" class="member-form-label-text">個人影音連結(限Youtube、SoundCloud)</label>
						<button type="button" class="form-btn media-plus">
							<i class="fa fa-plus" aria-hidden="true"></i>
						</button>
						<button type="button" class="form-btn media-minus">
							<i class="fa fa-minus" aria-hidden="true"></i>
						</button>
					</div>
					<div class="member-edit-media list"></div>
				</div>
			</form>
			<footer class="member-edit-footer">
				<button class="form-btn submit" id="update-member" type="button">儲存</button>
			</footer>
		</div>
	</div>
	<!-- 會員資料主頁面 -->
	<section class="profolio info">
		<div class="profolio-header">
			<div class="profolio-img-wrapper">
				<img class="profolio-img" id="member-pic" src="_996_image/user.png">
			</div>
			<div class="edit-wrapper" id="edit-member-btn">
				<button class="edit-btn">
					<i class="fa fa-pencil fa-lg" aria-hidden="true"></i>
				</button>
			</div>
		</div>
		<div class="profolio-info-text">
			<h1 class="member-name" id="member-name"></h1>
			<h2 class="member-skills" id="member-instrument"></h2>
		</div>
		<div class="profolio-action">
			<button class="btn btn-primary mail-btn">
				<i class="fa fa-envelope-o" fa-4x aria-hidden="true"></i>
			</button>
		</div>
		<div class="my-jam-event">
			<div class="my-jam-event-title">
				<h2>我的Jam Event</h2>
			</div>
			<div class="my-jam-event-link">
				<ul>
					<a href="">
						<li>[Jam樂器]吉他:gibson studio 九成新 25000</li>
					</a>
					<a href="">
						<li>[Jam教學]木吉他/電吉他</li>
					</a>
					<a href="">
						<li>[Jam組團]歌德金屬團徵鼓手</li>
					</a>
				</ul>
			</div>
		</div>
		<button type="button" class="abtbtn show" data-toggle="collapse" data-target="#intro-expended">展開 | 收回</button>

		<div class="member-intro-wrapper" wrap="physical">
			<div id="intro-original">
			</div>
			<div id="intro-expended" class="collapse" wrap="physical">
			</div>
		</div>
		<!--<div class="profolio-about-me-defualt" wrap="physical">
			<p class="test">
				<span class="firstline-wrapper"> <span class="firstline"
					id="member-intro-hide"> </span>
				<button class="abtbtn show">展開</button>
				</span>
			</p>
		</div>
		<div class="profolio-about-me-show">
			<p id="member-intro-show"></p>
			<button class="abtbtn hide">收回</button>
		</div>-->
	</section>
	<!-- 影音專區 -->
	<section class="profolio media">
		<div class="media-title">
			<h2>個人影音專區</h2>
		</div>
		<div id="media-video-list"></div>
	</section>
	<!-- footer -->
	<div class="footer-wrapper">

		<span>Jam Corporation © 2017 </span> <span>連絡我們</span> <i class="fa fa-facebook-square" aria-hidden="true">粉絲頁</i>
	</div>
	<!-- 登入/註冊畫面 -->
	<div class="user-modal">
		<!-- this is the entire modal form, including the background -->
		<div class="user-modal-container">
			<!-- this is the container wrapper -->
			<ul class="switcher">
				<li><a href="#0">登入</a></li>
				<li><a href="#0">註冊</a></li>
			</ul>
			<div id="login">
				<!-- log in form -->
				<form class="form">
					<a class="btn btn-block btn-social btn-facebook" id="fb-login-btn">
						<span class="fa fa-facebook"></span> 使用Facebook登入
					</a>
					<p class="fieldset">
						<label class="image-replace cd-email" for="signin-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signin-email" type="email" placeholder="E-mail">
						<span class="error-message">Error message here!</span>
					</p>
					<p class="fieldset">
						<label class="image-replace cd-password" for="signin-password">Password</label>
						<input class="full-width has-padding has-border" id="signin-password" type="text" placeholder="密碼">
						<span class="error-message">Error message here!</span>
					</p>
					<p class="fieldset" id="remember-me">
						<input type="checkbox" id="remember-me" checked>
						<label for="remember-me">記得我</label>
						<div class="error-IdPs">
							<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
							<span>無效的帳號或密碼</span>
						</div>
					</p>
					<p class="fieldset">
						<input class="full-width" id="login-submit" type="button" value="登入">
					</p>
				</form>
				<p class="form-bottom-message"><a href="#0">忘記密碼?</a></p>
				<a href="#0" class="close-form">Close</a>
			</div>
			<!-- login -->
			<div id="signup">
				<!-- sign up form -->
				<form class="form">
					<a class="btn btn-block btn-social btn-facebook" id="fb-login-btn2">
						<span class="fa fa-facebook"></span> 使用Facebook登入
					</a>
					<p class="fieldset">
						<label class="image-replace cd-email" for="signup-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signup-email" type="email" placeholder="E-mail">
						<span class="error-message">此帳號已被註冊!</span>
					</p>
					<p class="fieldset">
						<label class="image-replace cd-password" for="signup-password">Password</label>
						<input class="full-width has-padding has-border" id="signup-password" type="text" placeholder="密碼">
						<!-- <a href="#0" class="hide-password">隱藏密碼</a> -->
						<span class="error-message">請使用8位元-16位元的英文及數字組成密碼!</span>
					</p>
					<p class="fieldset">
						<label class="image-replace cd-password" for="signup-password">Password</label>
						<input class="full-width  has-padding has-border" id="signup-password-confirm" type="text" placeholder="確認密碼">
						<!-- <a href="#0" class="hide-password">隱藏密碼</a> -->
						<span class="error-message">密碼不一致!</span>
					</p>
					<p class="fieldset">
						<input type="checkbox" id="accept-terms">
						<label for="accept-terms">我同意 <a href="#0" class="terms">使用條款與規範</a></label>
					</p>
					<p class="fieldset">
						<input class="full-width has-padding" id="reg-submit" type="button" value="註冊">
					</p>
				</form>
				<!-- <a href="#0" class="close-form">Close</a> -->
			</div>
			<!-- signup -->
			<div id="reset-password">
				<!-- reset password form -->
				<p class="form-message">忘記密碼?請填入註冊信箱，我們將會寄一組新的密碼給您</p>
				<form class="form">
					<p class="fieldset">
						<label class="image-replace cd-email" for="reset-email">E-mail</label>
						<input class="full-width has-padding has-border" id="reset-email" type="email" placeholder="E-mail">
						<span class="error-message">Error message here!</span>
					</p>
					<p class="fieldset">
						<input class="full-width has-padding" type="submit" value="重設密碼">
					</p>
				</form>
				<p class="form-bottom-message"><a href="#0">回到登入畫面</a></p>
			</div>
			<a href="#0" class="close-form">Close</a>
		</div>
	</div>
	<script src="_997_framework/jquery-3.1.1.min.js"></script>
	<script src="_997_framework/jquery.cookie.js"></script>
	<script src="_997_framework/bootstrap/js/bootstrap.min.js"></script>
	<script src="_997_framework/js/croppie.js"></script>
	<script src="_997_framework/js/croppie_inst.js?ver=12"></script>
	<script src="_997_framework/js/main.js?ver=5"></script>

	<script src="_997_framework/js/fblogin.js"></script>
	<script src="_997_framework/js/login-status.js"></script>

	<script>
		$.ajax({
			url: '/Jam/goMemberPage',
			type: 'POST',
			datatype: 'json',
			data: { member: sessionStorage.getItem('LoginId') }
		}).done(response => {
			console.log(response);
			// login_Nav();
			$("#member-pic").attr("src", response.Member.pic || '');
			$("#member-name").html(response.Member.alias);
			// $("#member-intro-hide").html();
			$('#fb-loging-name').html(`Hi, ${sessionStorage.getItem('alias')}!`);
			$('#nav-pic').attr('src', sessionStorage.getItem('pic'))
			if (response.Member.url) {
				let url = response.Member.url.split(' ');
				console.log(url);
				$('#media-video-list').empty();
				url.map(v => {
					if (v) {
						$('#media-video-list').append(`<iframe src="https://www.youtube.com/embed/${v}" frameborder="0" allowfullscreen></iframe>`);
					}
				});
			}
			let {intro} = response.Member;
			const intro_show_number = intro.indexOf('\n', intro.indexOf('\n', intro.indexOf('\n') + 1) + 1);
			intro = ReplaceAll(intro, "\n", "<br />");
			console.log(intro);
			if (intro.length > intro_show_number && intro_show_number !== -1) {
				$('#intro-original').html(intro.substr(0, intro_show_number))
				$('#intro-expended').html(intro.substr(intro_show_number))
			} else {
				$('#intro-original').html(intro)
			}
			if (response.Member.instrument) {
				let instrument = response.Member.instrument.split(' ');
				$("#member-instrument").html(instrument.join(' / '));
			}
			function ReplaceAll(strOrg, strFind, strReplace) {
				var index = 0;
				while (strOrg.indexOf(strFind, index) != -1) {
					strOrg = strOrg.replace(strFind, strReplace);
					index = strOrg.indexOf(strFind, index);
				}
				return strOrg
			}
		});
	</script>
</body>

</html>